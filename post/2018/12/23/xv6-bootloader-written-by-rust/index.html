<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’rustã§æ›¸ãç›´ã™ - youta1119&#39;s blog</title>
  <meta property="og:title" content="xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’rustã§æ›¸ãç›´ã™" />
  <meta name="twitter:title" content="xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’rustã§æ›¸ãç›´ã™" />
  <meta name="description" content="ã¯ã˜ã‚ã«

å¤§é…åˆ»ã—ã¦ã™ã¿ã¾ã›ã‚“ã€‚
ã“ã®è¨˜äº‹ã¯è‡ªä½œOSã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼™æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚
ã“ã“åŠå¹´ãã‚‰ã„xv6ã‚’rustã§æ›¸ãç›´ã™ã“ã¨ã«æŒ‘æˆ¦ã—ã¦ã„ã‚‹ã®ã§ã€ãã®è©±ã‚’æ›¸ãã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®æ›¸ãæ›ãˆã«ã¤ã„ã¦è©³ã—ãæ›¸ãã¾ã™ã€‚">
  <meta property="og:description" content="ã¯ã˜ã‚ã«

å¤§é…åˆ»ã—ã¦ã™ã¿ã¾ã›ã‚“ã€‚
ã“ã®è¨˜äº‹ã¯è‡ªä½œOSã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼™æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚
ã“ã“åŠå¹´ãã‚‰ã„xv6ã‚’rustã§æ›¸ãç›´ã™ã“ã¨ã«æŒ‘æˆ¦ã—ã¦ã„ã‚‹ã®ã§ã€ãã®è©±ã‚’æ›¸ãã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®æ›¸ãæ›ãˆã«ã¤ã„ã¦è©³ã—ãæ›¸ãã¾ã™ã€‚">
  <meta name="twitter:description" content="ã¯ã˜ã‚ã«

å¤§é…åˆ»ã—ã¦ã™ã¿ã¾ã›ã‚“ã€‚
ã“ã®è¨˜äº‹ã¯è‡ªä½œOSã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼™æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚
ã“ã“åŠå¹´ãã‚‰ã„xv6ã‚’rustã§æ›¸ãç›´ã™ã“ã¨ã«æŒ‘æˆ¦ã—ã¦ã„ã‚‹ã®ã§ã€ãã®è©±ã‚’æ›¸ãã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®æ›¸ãæ›ãˆã«ã¤ã„ã¦è©³ã—ãæ›¸ãã¾ã™ã€‚">
  <meta name="author" content="yota ogino"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "youta1119&#39;s blog",
    
    "url": "https://youta1119.github.io"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https://youta1119.github.io"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https://youta1119.github.io",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https://youta1119.github.io/post/2018/12/23/xv6-bootloader-written-by-rust/",
          "name": "Xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’rustã§æ›¸ãç›´ã™"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "yota ogino"
  },
  "headline": "xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’rustã§æ›¸ãç›´ã™",
  "description" : "ã¯ã˜ã‚ã« å¤§é…åˆ»ã—ã¦ã™ã¿ã¾ã›ã‚“ã€‚ ã“ã®è¨˜äº‹ã¯è‡ªä½œOSã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼™æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚ ã“ã“åŠå¹´ãã‚‰ã„xv6ã‚’rustã§æ›¸ãç›´ã™ã“ã¨ã«æŒ‘æˆ¦ã—ã¦ã„ã‚‹ã®ã§ã€ãã®è©±ã‚’æ›¸ãã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®æ›¸ãæ›ãˆã«ã¤ã„ã¦è©³ã—ãæ›¸ãã¾ã™ã€‚
",
  "inLanguage" : "en",
  "wordCount": 3167,
  "datePublished" : "2018-12-23T00:00:00",
  "dateModified" : "2018-12-23T00:00:00",
  "image" : "https://youta1119.github.io/img/avatar.png",
  "keywords" : [ "xv6-rs, rust, è‡ªä½œOS" ],
  "mainEntityOfPage" : "https://youta1119.github.io/post/2018/12/23/xv6-bootloader-written-by-rust/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https://youta1119.github.io",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https://youta1119.github.io/img/avatar.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’rustã§æ›¸ãç›´ã™" />
<meta property="og:description" content="ã¯ã˜ã‚ã«

å¤§é…åˆ»ã—ã¦ã™ã¿ã¾ã›ã‚“ã€‚
ã“ã®è¨˜äº‹ã¯è‡ªä½œOSã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼™æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚
ã“ã“åŠå¹´ãã‚‰ã„xv6ã‚’rustã§æ›¸ãç›´ã™ã“ã¨ã«æŒ‘æˆ¦ã—ã¦ã„ã‚‹ã®ã§ã€ãã®è©±ã‚’æ›¸ãã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®æ›¸ãæ›ãˆã«ã¤ã„ã¦è©³ã—ãæ›¸ãã¾ã™ã€‚">
<meta property="og:image" content="https://youta1119.github.io/img/avatar.png" />
<meta property="og:url" content="https://youta1119.github.io/post/2018/12/23/xv6-bootloader-written-by-rust/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="youta1119&#39;s blog" />
  <meta name="twitter:title" content="xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’rustã§æ›¸ãç›´ã™" />
  <meta name="twitter:description" content="ã¯ã˜ã‚ã«

å¤§é…åˆ»ã—ã¦ã™ã¿ã¾ã›ã‚“ã€‚
ã“ã®è¨˜äº‹ã¯è‡ªä½œOSã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼™æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚
ã“ã“åŠå¹´ãã‚‰ã„xv6ã‚’rustã§æ›¸ãç›´ã™ã“ã¨ã«æŒ‘æˆ¦ã—ã¦ã„ã‚‹ã®ã§ã€ãã®è©±ã‚’æ›¸ãã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®æ›¸ãæ›ãˆã«ã¤ã„ã¦è©³ã—ãæ›¸ãã¾ã™ã€‚">
  <meta name="twitter:image" content="https://youta1119.github.io/img/avatar.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@youta1119" />
  <meta name="twitter:creator" content="@youta1119" />
  <link href='https://youta1119.github.io/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://youta1119.github.io/img/avatar.png" />
  <meta name="twitter:image" content="https://youta1119.github.io/img/avatar.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@youta1119" />
  <meta name="twitter:creator" content="@youta1119" />
  <meta property="og:url" content="https://youta1119.github.io/post/2018/12/23/xv6-bootloader-written-by-rust/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="youta1119&#39;s blog" />

  <meta name="generator" content="Hugo 0.52" />
  <link rel="alternate" href="https://youta1119.github.io/index.xml" type="application/rss+xml" title="youta1119&#39;s blog">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://youta1119.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://youta1119.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://youta1119.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-131292272-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://youta1119.github.io">youta1119&#39;s blog</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="Categories" href="/categories">Categories</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="youta1119&#39;s blog" href="https://youta1119.github.io">
            <img class="avatar-img" src="https://youta1119.github.io/img/avatar.png" alt="youta1119&#39;s blog" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’rustã§æ›¸ãç›´ã™</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on December 23, 2018
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;7&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;3167&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;yota ogino
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <h2 id="ã¯ã˜ã‚ã«">ã¯ã˜ã‚ã«</h2>

<p>å¤§é…åˆ»ã—ã¦ã™ã¿ã¾ã›ã‚“ã€‚
ã“ã®è¨˜äº‹ã¯<a href="https://adventar.org/calendars/2915">è‡ªä½œOSã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</a>ï¼™æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚
ã“ã“åŠå¹´ãã‚‰ã„xv6ã‚’rustã§æ›¸ãç›´ã™ã“ã¨ã«æŒ‘æˆ¦ã—ã¦ã„ã‚‹ã®ã§ã€ãã®è©±ã‚’æ›¸ãã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯xv6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®æ›¸ãæ›ãˆã«ã¤ã„ã¦è©³ã—ãæ›¸ãã¾ã™ã€‚</p>

<p>ã¾ã å…¨ç„¶å®Œæˆã«ã¯ç¨‹é ã„ã§ã™ãŒæˆæœç‰©(ä»¥ä¸‹xv6-rs)ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã™ã€‚
<a href="https://github.com/youta1119/xv6-rs">https://github.com/youta1119/xv6-rs</a></p>

<p><center>
<link rel="stylesheet" href="/css/hugo-easy-gallery.css" />
<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/img/2018-12-22/screenshot.png" alt="å‹•ä½œã®æ§˜å­"/>
    </div>
    <a href="/img/2018-12-22/screenshot.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>å‹•ä½œã®æ§˜å­</p>
      </figcaption>
  </figure>
</div>
</center></p>

<p>ç¾åœ¨ã¾ã§ã®é€²æ—ã¯ã“ã‚“ãªæ„Ÿã˜ã«ãªã£ã¦ã¾ã™</p>

<ul>
<li>ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼å´ã¯rustã§æ›¸ãæ›ãˆå®Œäº†</li>
<li>ã‚«ãƒ¼ãƒãƒ«å´ã¯uartã«ã‚ˆã‚‹æ¨™æº–å‡ºåŠ›ã¾ã§å®Ÿè£…</li>
</ul>

<h2 id="ãªãœvx6">ãªãœvx6?</h2>

<p>ä»Šå¹´ã®3æœˆã”ã‚ã«OSã®å‹‰å¼·ã—ãŸã„ã¨æ€ã£ã¦ã€30æ—¥è‡ªä½œOSæœ¬ã‚’è²·ã„ã¾ã—ãŸã€‚
ã—ã‹ã—ã€ãƒ„ãƒ¼ãƒ«ãƒã‚§ã‚¤ãƒ³ãŒè‘—è€…ã®è‡ªä½œã—ãŸã‚‚ã®ã ã£ãŸã‚Šã€åƒ•ã®ç’°å¢ƒ(mac os)ã§å‹•ã‹ã™ã®ãŒå¤§å¤‰ã ã£ãŸã‚Šã¨ã„ã‚ã„ã‚æ€ã†ã¨ã“ã‚ãŒã‚ã£ã¦3æ—¥ç›®ãã‚‰ã„ã§ã‚„ã‚ã¾ã—ãŸã€‚</p>

<p>ãã‚Œã‹ã‚‰ã—ã°ã‚‰ãã—ãŸã‚ã‚‹æ—¥ã€<a href="https://turingcomplete.fm/">Turing Complete FM</a>ã‚’èã„ã¦ã„ãŸã‚‰xv6ã®è©±ã§ã¦ããŸã®ã§ã€xv6ã¨ã¯ãªã‚“ãã‚„ã¨èª¿ã¹ã¦ã¿ã‚‹ã¨ã€MITãŒé–‹ç™ºã—ãŸæ•™è‚²ç”¨ã®OSã§ã‚ã‚‹ã“ã¨ã€è¬›ç¾©è³‡æ–™ãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’çŸ¥ã‚Šã¾ã—ãŸã€‚
xv6ã¯ã€ã¯ã‚Šã¼ã¦OSã¨æ¯”è¼ƒã—ã¦ã€ç¾ä»£ã®æ±ç”¨OSã«å¿…è¦ãªæ©Ÿèƒ½ãŒæœ€ä½é™ãã‚ã£ã¦ã„ã‚‹ã“ã¨ã€unixç’°å¢ƒã§é–‹ç™ºã§ãã‚‹ã®ã“ã¨ãŒè‰¯ã„ã¨æ€ã„ã¾ã—ãŸã€‚
ãã“ã§xv6ã®è¬›ç¾©è³‡æ–™ã‚’ä½¿ã£ã¦OSã®å‹‰å¼·ã‚’å§‹ã‚ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p>

<h2 id="ãªãœrust">ãªãœrust?</h2>

<p>ãŠãã‚‰ãè¬›ç¾©æ™‚é–“ã®éƒ½åˆã ã¨æ€ã„ã¾ã™ãŒã€xv6ã®è¬›ç¾©ã§ã¯ã€ã»ã¨ã‚“ã©å®Œæˆã—ã¦ã‚ã‚‹OSã«ä¸è¶³ã—ãŸæ©Ÿèƒ½ã‚’ã€ç©´åŸ‹ã‚å½¢å¼ã§ã‚’è¶³ã—ã¦ã„ãå½¢ã«ãªã£ã¦ã¾ã™ã€‚
ã—ã‹ã—ã€ã“ã‚Œã¯ã€30æ—¥è‡ªä½œOSæœ¬ã®ã‚ˆã†ã«æœ€åˆã‹ã‚‰æ‰‹ã‚’å‹•ã‹ã—ã¦OSã‚’ä½œã£ã¦ã¿ãŸã‹ã£ãŸåƒ•ã«ã¯ä¸æº€ãŒã‚ã‚Šã¾ã—ãŸã€‚
ãªã®ã§ã€åˆ¥ã®è¨€èªã§æœ€åˆã‹ã‚‰æ›¸ãç›´ã—ã¦ã—ã¾ãˆã°ã„ã„ã®ã§ã¯ãªã„ã‹rustã§æ›¸ãç›´ã™ã“ã¨ã«ã—ã¾ã—ãŸã€‚
rustã‚’é¸ã‚“ã ã®ã¯ã€ä¸¦è¡Œæ€§ã€å®‰å…¨æ€§ã‚’è¨€èªä»•æ§˜ã¨ã—ã¦ä¿è¨¼ã—ã¦ãã‚Œã‚‹ç‚¹ãŒOSé–‹ç™ºã®éš›ã«å½¹ç«‹ã¡ãã†ã ã¨æ€ã£ãŸã‹ã‚‰ã§ã™ã€‚</p>

<h2 id="ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®å®Ÿè£…">ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®å®Ÿè£…</h2>

<h3 id="é–‹ç™ºç’°å¢ƒ">é–‹ç™ºç’°å¢ƒ</h3>

<ul>
<li>ubuntu 18.04.1 LTS</li>
<li>rustc 1.32.0-nightly</li>
<li>xargo 0.3.12</li>
</ul>

<p>é–‹ç™ºç’°å¢ƒã¯ã“ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
nightlyç‰ˆã®rustã‚’ä½¿ç”¨ã—ã€xargoã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚
<a href="https://github.com/japaric/xargo">xargo</a>ã¯ã‚«ã‚¹ã‚¿ãƒ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå‘ã‘ã®sysrootã®ãƒ“ãƒ«ãƒ‰ã—ã¦ã€rustã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹éš›ã«sysrootã‚’ã„ã„æ„Ÿã˜ã«åˆ‡ã‚Šæ›¿ãˆã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ã¾ãŸrustã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ä½¿ã‚ãšã€OSã«ä¾å­˜ã—ãªã„ãƒãƒ¼ã‚¿ãƒ–ãƒ«ãªã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚</p>

<h3 id="ã‚«ã‚¹ã‚¿ãƒ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®è¨­å®š">ã‚«ã‚¹ã‚¿ãƒ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®è¨­å®š</h3>

<p>è‡ªä½œOSã«é©ã—ãŸã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¯rustcã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚
rustã§ã¯ã‚¿ãƒ¼ã‚±ãƒƒãƒˆä»•æ§˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã§ã‚«ã‚¹ã‚¿ãƒ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ä½œæˆã§ãã¾ã™ã€‚
ã‚¿ãƒ¼ã‚±ãƒƒãƒˆä»•æ§˜ãƒ•ã‚¡ã‚¤ãƒ«ã¯jsonå½¢å¼ã§ä½œæˆã—ã¾ã™ã€‚</p>

<p>ã“ã®è¾ºã‚’å‚è€ƒã«ã‚³ãƒ”ãƒšã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¿ãƒ¼ã‚±ãƒƒãƒˆä»•æ§˜ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä½œæˆã—ã¾ã—ãŸã€‚
å¤šåˆ†ã„ã‚‰ãªã„é …ç›®ã‚‚ã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€å‹•ã„ã¦ã„ã‚‹ã®ã§æ°—ã«ã—ãªã„ã“ã¨ã«ã—ã¾ã™ã€‚</p>

<ul>
<li><a href="https://github.com/rust-lang/rust/tree/master/src/librustc_target/spec">https://github.com/rust-lang/rust/tree/master/src/librustc_target/spec</a></li>
<li><a href="https://os.phil-opp.com/set-up-rust/">https://os.phil-opp.com/set-up-rust/</a></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;llvm-target&#34;</span><span class="p">:</span> <span class="s2">&#34;i386-unknown-none&#34;</span><span class="p">,</span>
    <span class="nt">&#34;target-endian&#34;</span><span class="p">:</span> <span class="s2">&#34;little&#34;</span><span class="p">,</span>
    <span class="nt">&#34;target-c-int-width&#34;</span><span class="p">:</span> <span class="s2">&#34;32&#34;</span><span class="p">,</span>
    <span class="nt">&#34;target-pointer-width&#34;</span><span class="p">:</span> <span class="s2">&#34;32&#34;</span><span class="p">,</span>
    <span class="nt">&#34;max-atomic-width&#34;</span><span class="p">:</span> <span class="s2">&#34;64&#34;</span><span class="p">,</span>
    <span class="nt">&#34;data-layout&#34;</span><span class="p">:</span> <span class="s2">&#34;e-m:e-i32:32-f32:32-n8:16:32-S128-p:32:32:32&#34;</span><span class="p">,</span>
    <span class="nt">&#34;arch&#34;</span><span class="p">:</span> <span class="s2">&#34;x86&#34;</span><span class="p">,</span>
    <span class="nt">&#34;cpu&#34;</span><span class="p">:</span> <span class="s2">&#34;pentium4&#34;</span><span class="p">,</span>
    <span class="nt">&#34;os&#34;</span><span class="p">:</span> <span class="s2">&#34;none&#34;</span><span class="p">,</span> <span class="err">//</span> <span class="err">osãªã—</span>
    <span class="nt">&#34;linker-flavor&#34;</span><span class="p">:</span> <span class="s2">&#34;ld.lld&#34;</span><span class="p">,</span>
    <span class="nt">&#34;linker&#34;</span><span class="p">:</span> <span class="s2">&#34;rust-lld&#34;</span><span class="p">,</span> <span class="err">//rustå†…è‡“ã®lldã§ãƒªãƒ³ã‚¯ã™ã‚‹</span>
    <span class="nt">&#34;pre-link-args&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;ld.lld&#34;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&#34;--script=linker.ld&#34;</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&#34;features&#34;</span><span class="p">:</span> <span class="s2">&#34;-mmx,-sse,+soft-float&#34;</span><span class="p">,</span> <span class="err">//smidå‘½ä»¤ã‚’ç„¡åŠ¹åŒ–(å‰²ã‚Šè¾¼ã¿æ™‚ã®ã‚¹ã‚¿ãƒƒã‚¯é€€é¿ãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ä½ä¸‹ã•ã›ã‚‹ãŸã‚)</span>
    <span class="nt">&#34;dynamic-linking&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nt">&#34;has-rpath&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nt">&#34;no-default-libraries&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&#34;has-elf-tls&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&#34;eliminate-frame-pointer&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nt">&#34;no-compiler-rt&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&#34;disable-redzone&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="err">//ãƒ¬ãƒƒãƒ‰ã‚½ãƒ¼ãƒ³ã‚’ç„¡åŠ¹åŒ–(ã‚ˆãã‚ã‹ã£ã¦ãªã„)</span>
    <span class="nt">&#34;panic-strategy&#34;</span><span class="p">:</span> <span class="s2">&#34;abort&#34;</span><span class="p">,</span>ã€€<span class="err">//ãƒ‘ãƒ‹ãƒƒã‚¯ã‚’èµ·ããŸã¨ãã«abortã™ã‚‹ã‚ˆã†ã«ã™ã‚‹</span>
    <span class="nt">&#34;executables&#34;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span></code></pre></div>
<h3 id="å®Ÿè£…ã«ã¤ã„ã¦">å®Ÿè£…ã«ã¤ã„ã¦</h3>

<p>rustã§ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’ä½œã‚‹ã«ã¯ç§ã®çŸ¥ã‚‹é™ã‚Šï¼’ã¤ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚</p>

<ul>
<li>1ã¤ç›®ã¯ã€ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒªã¨ã‚³ãƒ¼ãƒ‰ã‚’åˆ¥ã€…ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ–¹æ³•ã§ã™ã€‚ã“ã®æ–¹æ³•ã§ã¯ã‚¢ã‚»ãƒ³ãƒ–ãƒªã¯gccã§ã€ã‚³ãƒ¼ãƒ‰ã¯rustã§é™çš„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¾ã™ã€‚ãã—ã¦ç”Ÿæˆã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªãƒ³ã‚«ã§çµåˆã™ã‚‹ã“ã¨ã§ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ã‚’ä½œæˆã—ã¾ã™ã€‚</li>
<li>2ã¤ç›®ã¯ã€rustã®è‡ªç”±å½¢å¼ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒª(global_asm)ã‚’ã¤ã‹ã£ã¦ rustã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§ä¸€ç·’ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹æ–¹æ³•ã§ã™ã€‚</li>
</ul>

<p>rustã§OSã‚’ä½œã‚‹ä»¥ä¸Šã§ãã‚‹ã ã‘rustã®æ©Ÿèƒ½ã‚’ä½¿ã„ãŸã„æ°—æŒã¡ãŒã‚ã£ãŸã®ã§2ã¤ç›®ã®æ–¹æ³•ã‚’é¸ã³ã¾ã—ãŸã€‚</p>

<h4 id="ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼-ã‚¢ã‚»ãƒ³ãƒ–ãƒªå´">ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼(ã‚¢ã‚»ãƒ³ãƒ–ãƒªå´)</h4>

<p>è‡ªç”±å½¢å¼ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒªã¯LLVMã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ¬ãƒ™ãƒ«ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¢ã‚»ãƒ³ãƒ–ãƒªã«å¤‰æ›ã•ã‚Œã‚‹ã‚ˆã†ã§ã€ãŠãã‚‰ãllvmã®çµ„ã¿è¾¼ã¿ã‚¢ã‚»ãƒ³ãƒ–ãƒ©ã§å‡¦ç†ã•ã‚Œã‚‹ã®ã ã¨æ€ã„ã¾ã™ã€‚
è©¦ã—ã¦ã¿ãŸæ„Ÿã˜gasã¨æ§‹æ–‡ã§ã€gasã®ãƒã‚¯ãƒ­ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ãŒä½¿ãˆã¾ã—ãŸ</p>

<p>ã»ã¨ã‚“ã©vx6ã®ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒª(boot.S)ã‚’ã‚³ãƒ”ãƒšã—ãŸã‚‚ã®ã§ã™ãŒã€ã‚¢ã‚»ãƒ³ãƒ–ãƒ©ãŒgccã‹ã‚‰llvmã®çµ„ã¿è¾¼ã¿ã‚¢ã‚»ãƒ³ãƒ–ãƒ©ã«å¤‰ã‚ã£ãŸãŸã‚ã€<code>#define</code>ãƒã‚¯ãƒ­ãŒä½¿ãˆãªããªã£ã¦ã—ã¾ã£ãŸã®ã§ã€ãã®éƒ¨åˆ†ã¯ã‚¢ã‚»ãƒ³ãƒ–ãƒªã®ãƒã‚¯ãƒ­ã§æ›¸ãç›´ã—ã¾ã—ãŸã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-assembly" data-lang="assembly"># Start the CPU: switch to 32-bit protected mode, jump into C.
# The BIOS loads this code from the first sector of the hard disk into
# memory at physical address 0x7c00 and starts executing in real mode
# with %cs=0 %ip=7c00.

.set PROT_MODE_CSEG, 0x8         # kernel code segment selector
.set PROT_MODE_DSEG, 0x10        # kernel data segment selector
.set CR0_PE_ON,      0x1         # protected mode enable flag
.set STA_X, 0x8 // Executable segment
.set STA_R, 0x2 // Readable (executable segments)
.set STA_W, 0x2 // Writeable (non-executable segments)

# defineãƒã‚¯ãƒ­ãŒä½¿ãˆãªããªã£ã¦ã—ã¾ã£ãŸã®ã§æ›¸ãæ›ãˆãŸ
.macro SEG_NULL
  .word 0, 0
	.byte 0, 0, 0, 0
.endm  

.macro SEG type, base, lim
	.word ((\lim &gt;&gt; 12) &amp; 0xffff), (\base &amp; 0xffff)
	.byte ((\base &gt;&gt; 16) &amp; 0xff), (0x90 | \type),	(0xC0 | ((\lim &gt;&gt; 28) &amp; 0xf)), ((\base &gt;&gt; 24) &amp; 0xff)
.endm

.code16                     # Assemble for 16-bit mode
.globl start

start:
  cli                         # Disable interrupts
  cld                         # String operations increment
  # Set up the important data segment registers (DS, ES, SS).
  xorw    %ax,%ax             # Segment number zero
  movw    %ax,%ds             # -&gt; Data Segment
  movw    %ax,%es             # -&gt; Extra Segment
  movw    %ax,%ss             # -&gt; Stack Segment

# A20ã‚²ãƒ¼ãƒˆã®æœ‰åŠ¹åŒ–
# ref:http://caspar.hazymoon.jp/OpenBSD/annex/gate_a20.html
  # Enable A20:
  #   For backwards compatibility with the earliest PCs, physical
  #   address line 20 is tied low, so that addresses higher than
  #   1MB wrap around to zero by default.  This code undoes this.
seta20.1:
  inb     $0x64,%al               # Wait for not busy
  testb   $0x2,%al
  jnz     seta20.1

  movb    $0xd1,%al               # 0xd1 -&gt; port 0x64
  outb    %al,$0x64

seta20.2:
  inb     $0x64,%al               # Wait for not busy
  testb   $0x2,%al
  jnz     seta20.2

  movb    $0xdf,%al               # 0xdf -&gt; port 0x60
  outb    %al,$0x60

  # Switch from real to protected mode, using a bootstrap GDT
  # and segment translation that makes virtual addresses 
  # identical to their physical addresses, so that the 
  # effective memory map does not change during the switch.
  # GDTã®è¨­å®š
  lgdt    gdtdesc
  movl    %cr0, %eax
  orl     $CR0_PE_ON, %eax
  movl    %eax, %cr0
  
  # Jump to next instruction, but in 32-bit code segment.
  # Switches processor into 32-bit mode.
  # 32bitãƒ¢ãƒ¼ãƒ‰ã«ç§»è¡Œ
  ljmp    $PROT_MODE_CSEG, $protcseg

.code32                     # Assemble for 32-bit mode
protcseg:
  # Set up the protected-mode data segment registers
  # å„ãƒ¬ã‚¸ã‚¹ã‚¿åˆæœŸåŒ–
  movw    $PROT_MODE_DSEG, %ax    # Our data segment selector
  movw    %ax, %ds                # -&gt; DS: Data Segment
  movw    %ax, %es                # -&gt; ES: Extra Segment
  movw    %ax, %ss                # -&gt; SS: Stack Segment
  movw    %ax, %fs                # -&gt; FS
  movw    %ax, %gs                # -&gt; GS
  
  
  # Set up the stack pointer and call into C.
  # ã‚¹ã‚¿ãƒƒã‚¯ãƒã‚¤ãƒ³ã‚¿ã‚’è¨­å®šã—ã¦ã‚‹ã£ã½ã„(ã‚ˆãã‚ã‹ã£ã¦ãªã„)
  movl $start, %esp
  call bootmain #rustã®é–¢æ•°å‘¼ã³å‡ºã—

  # If bootmain returns (it shouldn&#39;t), loop.
spin:
  hlt
  jmp spin

# Bootstrap GDT
#.p2align 2                                # force 4 byte alignment
gdt:
  SEG_NULL				# null seg
  SEG STA_X|STA_R, 0x0, 0xffffffff	# code seg
  SEG STA_W, 0x0, 0xffffffff	        # data seg

gdtdesc:
  .word   0x17                            # sizeof(gdt) - 1
  .long   gdt                             # address gdt</code></pre></div>
<h4 id="ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼-rustå´">ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼(rustå´)</h4>

<p>xv6ã®<code>main.c</code>ã‚’ã»ã¼ãã®ã¾ã¾rustã«ç§»æ¤ã—ãŸã ã‘ã§ã™ã€‚
åƒ•ã¯ãƒã‚¤ãƒ³ã‚¿ãŒè‹¦æ‰‹ã§ã™ãŒã€å¤‰ãªã“ã¨ã—ã‚ˆã†ã¨ã™ã‚‹ã¨rustã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒã—ã£ã‹ã‚Šæ€’ã£ã¦ãã‚ŒãŸã®ã§ã€ç‰¹ã«ãƒãƒã£ãŸã‚Šã—ã¾ã›ã‚“ã§ã—ãŸã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-rust" data-lang="rust"><span class="cp">#![no_std]</span><span class="w"> </span><span class="c1">//æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã¤ã‹ã‚ãªã„
</span><span class="c1"></span><span class="cp">#![no_main]</span><span class="w">
</span><span class="w"></span><span class="cp">#![feature(lang_items)]</span><span class="w">
</span><span class="w"></span><span class="cp">#![feature(global_asm)]</span><span class="w">
</span><span class="w"></span><span class="cp">#![feature(asm)]</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">extern</span><span class="w"> </span><span class="k">crate</span><span class="w"> </span><span class="n">x86</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">mod</span> <span class="nn">elf</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="n">elf</span>::<span class="p">{</span><span class="n">ElfHeader</span><span class="p">,</span><span class="w"> </span><span class="n">ProgramHeader</span><span class="p">,</span><span class="w"> </span><span class="n">ELF_MAGIC</span><span class="p">};</span><span class="w">
</span><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="n">x86</span>::<span class="n">instruction</span>::<span class="p">{</span><span class="n">inb</span><span class="p">,</span><span class="w"> </span><span class="n">insl</span><span class="p">,</span><span class="w"> </span><span class="n">outb</span><span class="p">};</span><span class="w">
</span><span class="w"></span><span class="k">use</span><span class="w"> </span><span class="n">core</span>::<span class="n">panic</span>::<span class="n">PanicInfo</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">// boot.Sã®å†…å®¹ã‚’æ–‡å­—åˆ—ã¨ã—ã¦èª­ã¿è¾¼ã‚“ã§,ã€€è‡ªç”±å½¢å¼ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒªã¨ã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«è§£é‡ˆã•ã›ã‚‹
</span><span class="c1"></span><span class="n">global_asm</span><span class="o">!</span><span class="p">(</span><span class="n">include_str</span><span class="o">!</span><span class="p">(</span><span class="s">&#34;boot.S&#34;</span><span class="p">));</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">const</span><span class="w"> </span><span class="n">SECTOR_SIZE</span>: <span class="kt">u32</span> <span class="o">=</span><span class="w"> </span><span class="mi">512</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="cp">#[no_mangle]</span><span class="w">
</span><span class="w"></span><span class="k">pub</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="k">extern</span><span class="w"> </span><span class="s">&#34;C&#34;</span><span class="w"> </span><span class="k">fn</span> <span class="nf">bootmain</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">elf_header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x10000</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">ElfHeader</span><span class="p">;</span><span class="c1">// scratch space
</span><span class="c1"></span><span class="w">    </span><span class="n">read_segment</span><span class="p">(</span><span class="n">elf_header</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">SECTOR_SIZE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">elf_header</span><span class="p">).</span><span class="n">magic</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">ELF_MAGIC</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">        </span><span class="c1">//outw(0x8A00, 0x8A00);
</span><span class="c1"></span><span class="w">        </span><span class="c1">//outw(0x8A00, 0x8E00);
</span><span class="c1"></span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="w">    </span><span class="c1">// load each program segment (ignores ph flags)
</span><span class="c1"></span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">ph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">elf_header</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="kt">u8</span><span class="p">).</span><span class="n">offset</span><span class="p">((</span><span class="o">*</span><span class="n">elf_header</span><span class="p">).</span><span class="n">phoff</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">isize</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">ProgramHeader</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">eph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ph</span><span class="p">.</span><span class="n">offset</span><span class="p">((</span><span class="o">*</span><span class="n">elf_header</span><span class="p">).</span><span class="n">phnum</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">isize</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="n">ph</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">eph</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">        </span><span class="n">read_segment</span><span class="p">((</span><span class="o">*</span><span class="n">ph</span><span class="p">).</span><span class="n">paddr</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">ph</span><span class="p">).</span><span class="n">memsz</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">ph</span><span class="p">).</span><span class="n">off</span><span class="p">);</span><span class="w">
</span><span class="w">        </span><span class="n">ph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">ph</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">u32</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">ProgramHeader</span><span class="p">;</span><span class="w"> </span><span class="c1">//ph.offset(1);
</span><span class="c1"></span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="w">    </span><span class="c1">// call the entry point from the ELF header
</span><span class="c1"></span><span class="w">    </span><span class="c1">// note: does not return!
</span><span class="c1"></span><span class="w">    </span><span class="c1">// ã‚«ãƒ¼ãƒãƒ«ã‚’å‘¼ã³å‡ºã™ã€‚
</span><span class="c1"></span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">entry</span>: <span class="nc">extern</span><span class="w"> </span><span class="s">&#34;C&#34;</span><span class="w"> </span><span class="k">fn</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="o">!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">core</span>::<span class="n">mem</span>::<span class="n">transmute</span><span class="p">((</span><span class="o">*</span><span class="n">elf_header</span><span class="p">).</span><span class="n">entry</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="n">entry</span><span class="p">();</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">// Read &#39;count&#39; bytes at &#39;offset&#39; from kernel into physical address &#39;pa&#39;.
</span><span class="c1">// Might copy more than asked
</span><span class="c1">// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ã•ã‚Œã‚‹ã¨510ãƒã‚¤ãƒˆåˆ¶é™ã‚’è¶…ãˆã¦ã—ã¾ã†ã®ã§ã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ã•ã›ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚
</span><span class="c1"></span><span class="cp">#[inline(never)]</span><span class="w">
</span><span class="w"></span><span class="k">unsafe</span><span class="w"> </span><span class="k">fn</span> <span class="nf">read_segment</span><span class="p">(</span><span class="n">pa</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">count</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">offset</span>: <span class="kt">u32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">epa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pa</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="c1">// round down to sector boundary
</span><span class="c1"></span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">bpa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pa</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">!</span><span class="p">(</span><span class="n">SECTOR_SIZE</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="c1">// translate from bytes to sectors, and kernel starts at sector 1
</span><span class="c1"></span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">offset</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">SECTOR_SIZE</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="c1">// If this is too slow, we could read lots of sectors at a time.
</span><span class="c1"></span><span class="w">    </span><span class="c1">// We&#39;d write more to memory than asked, but it doesn&#39;t matter --
</span><span class="c1"></span><span class="w">    </span><span class="c1">// we load in increasing order.
</span><span class="c1"></span><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="n">bpa</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">epa</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">        </span><span class="c1">// Since we haven&#39;t enabled paging yet and we&#39;re using
</span><span class="c1"></span><span class="w">        </span><span class="c1">// an identity segment mapping (see boot.S), we can
</span><span class="c1"></span><span class="w">        </span><span class="c1">// use physical addresses directly.  This won&#39;t be the
</span><span class="c1"></span><span class="w">        </span><span class="c1">// case once JOS enables the MMU.
</span><span class="c1"></span><span class="w">        </span><span class="n">read_sector</span><span class="p">(</span><span class="n">bpa</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">offset</span><span class="p">);</span><span class="w">
</span><span class="w">        </span><span class="n">offset</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="w">        </span><span class="n">bpa</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">SECTOR_SIZE</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">unsafe</span><span class="w"> </span><span class="k">fn</span> <span class="nf">wait_disk</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="c1">// wait for disk reaady
</span><span class="c1"></span><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">inb</span><span class="p">(</span><span class="mh">0x1F7</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xC0</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mh">0x40</span><span class="w"> </span><span class="p">{};</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">unsafe</span><span class="w"> </span><span class="k">fn</span> <span class="nf">read_sector</span><span class="p">(</span><span class="n">dst</span>: <span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">offset</span>: <span class="kt">u32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="c1">// wait for disk to be ready
</span><span class="c1"></span><span class="w">    </span><span class="n">wait_disk</span><span class="p">();</span><span class="w">
</span><span class="w">    </span><span class="n">outb</span><span class="p">(</span><span class="mh">0x1F2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// count = 1
</span><span class="c1"></span><span class="w">    </span><span class="n">outb</span><span class="p">(</span><span class="mh">0x1F3</span><span class="p">,</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">u8</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="n">outb</span><span class="p">(</span><span class="mh">0x1F4</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">offset</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">u8</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="n">outb</span><span class="p">(</span><span class="mh">0x1F5</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">offset</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">u8</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="n">outb</span><span class="p">(</span><span class="mh">0x1F6</span><span class="p">,</span><span class="w"> </span><span class="p">((</span><span class="n">offset</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">24</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mh">0xE0</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">u8</span><span class="p">);</span><span class="w">
</span><span class="w">    </span><span class="n">outb</span><span class="p">(</span><span class="mh">0x1F7</span><span class="p">,</span><span class="w"> </span><span class="mh">0x20</span><span class="p">);</span><span class="w"> </span><span class="c1">// cmd 0x20 - read sectors
</span><span class="c1"></span><span class="w">    </span><span class="c1">// wait for disk to be ready
</span><span class="c1"></span><span class="w">    </span><span class="n">wait_disk</span><span class="p">();</span><span class="w">
</span><span class="w">    </span><span class="c1">// read a sector
</span><span class="c1"></span><span class="w">    </span><span class="n">insl</span><span class="p">(</span><span class="mh">0x1F0</span><span class="p">,</span><span class="w"> </span><span class="n">dst</span><span class="p">,</span><span class="w"> </span><span class="n">SECTOR_SIZE</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="cp">#[panic_handler]</span><span class="w">
</span><span class="w"></span><span class="cp">#[no_mangle]</span><span class="w">
</span><span class="w"></span><span class="c1">// ãƒ‘ãƒ‹ãƒƒã‚¯ãŒèµ·ããŸã¨ãã«å‘¼ã°ã‚Œã‚‹
</span><span class="c1">// ref: https://doc.rust-lang.org/nomicon/panic-handler.html
</span><span class="c1"></span><span class="k">pub</span><span class="w"> </span><span class="k">extern</span><span class="w"> </span><span class="s">&#34;C&#34;</span><span class="w"> </span><span class="k">fn</span> <span class="nf">panic</span><span class="p">(</span><span class="n">_info</span>: <span class="kp">&amp;</span><span class="nc">PanicInfo</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="k">loop</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="cp">#[lang = </span><span class="s">&#34;eh_personality&#34;</span><span class="cp">]</span><span class="w">
</span><span class="w"></span><span class="cp">#[no_mangle]</span><span class="w">
</span><span class="w"></span><span class="c1">//ã€€ãŠã¾ã˜ãªã„(ã‚ˆãã‚ã‹ã£ã¦ãªã„)
</span><span class="c1">// https://doc.rust-lang.org/1.6.0/book/no-stdlib.html
</span><span class="c1"></span><span class="k">pub</span><span class="w"> </span><span class="k">extern</span><span class="w"> </span><span class="s">&#34;C&#34;</span><span class="w"> </span><span class="k">fn</span> <span class="nf">eh_personality</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="k">loop</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="w"></span><span class="p">}</span><span class="w">
</span><span class="w"></span></code></pre></div>
<h4 id="ãƒªãƒ³ã‚«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ">ãƒªãƒ³ã‚«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</h4>

<p>ãƒªãƒ³ã‚«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®ãƒ–ãƒ¼ãƒˆã‚·ã‚°ãƒãƒãƒ£ã®ä»˜ä¸ã‚‚ã‚„ã£ã¦ã„ã¾ã™ã€‚
é–‹ç™ºå½“åˆãƒ–ãƒ¼ãƒˆã‚·ã‚°ãƒãƒãƒ£ã‚’ã¤ã‘å¿˜ã‚ŒãŸãŸã‚ã€ãƒ–ãƒ¼ãƒˆã§ããªãã¦ãƒ‡ãƒãƒƒã‚¯ã«ä½•æ™‚é–“ã‚‚æ™‚é–“ã‚’æº¶ã‹ã—ã¾ã—ãŸğŸ˜‡</p>
<div class="highlight"><pre class="chroma">OUTPUT_FORMAT(&#34;elf32-i386&#34;, &#34;elf32-i386&#34;, &#34;elf32-i386&#34;)
OUTPUT_ARCH(i386)
ENTRY(start)
IPLBASE = 0x7c00;

SECTIONS {
ã€€ã€€/* ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ã¯0x7c00ã«èª­ã¿è¾¼ã¾ã‚Œã‚‹ãŸã‚ã€é–‹å§‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’0x7c00ã«ã™ã‚‹*/
    . = IPLBASE;
    .text : AT(IPLBASE) {
      *(.text)
      *(.data)
      *(.bbs)
    }
    . = IPLBASE + 510;
    /* 510ãƒã‚¤ãƒˆç›®ã«0xaa55ã‚’æ›¸ãè¾¼ã‚€ã€ã“ã‚ŒãŒãªã„ã¨ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã¨ã—ã¦èªè­˜ã•ã‚Œãªã„*/
    .sign : {
      SHORT(0xaa55)
    }
}</pre></div>
<h2 id="ä»Šå¾Œã®ç›®æ¨™">ä»Šå¾Œã®ç›®æ¨™</h2>

<p>ã¨ã‚Šã‚ãˆãšåŠå¹´ãã‚‰ã„ã‹ã‘ã¦ã‚«ãƒ¼ãƒãƒ«ã®éƒ¨åˆ†ã‚’å®Ÿè£…ã—ãŸã„ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p>

        
          <div class="blog-tags">
            
              <a href="https://youta1119.github.io/tags/xv6-rs/">xv6-rs</a>&nbsp;
            
              <a href="https://youta1119.github.io/tags/rust/">rust</a>&nbsp;
            
              <a href="https://youta1119.github.io/tags/%E8%87%AA%E4%BD%9Cos/">è‡ªä½œOS</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fyouta1119.github.io%2fpost%2f2018%2f12%2f23%2fxv6-bootloader-written-by-rust%2f&amp;text=xv6%e3%81%ae%e3%83%96%e3%83%bc%e3%83%88%e3%83%ad%e3%83%bc%e3%83%80%e3%83%bc%e3%82%92rust%e3%81%a7%e6%9b%b8%e3%81%8d%e7%9b%b4%e3%81%99&amp;via=youta1119" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//plus.google.com/share?url=https%3a%2f%2fyouta1119.github.io%2fpost%2f2018%2f12%2f23%2fxv6-bootloader-written-by-rust%2f" target="_blank" title="Share on Google Plus">
          <i class="fab fa-google-plus"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fyouta1119.github.io%2fpost%2f2018%2f12%2f23%2fxv6-bootloader-written-by-rust%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fyouta1119.github.io%2fpost%2f2018%2f12%2f23%2fxv6-bootloader-written-by-rust%2f&amp;title=xv6%e3%81%ae%e3%83%96%e3%83%bc%e3%83%88%e3%83%ad%e3%83%bc%e3%83%80%e3%83%bc%e3%82%92rust%e3%81%a7%e6%9b%b8%e3%81%8d%e7%9b%b4%e3%81%99" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fyouta1119.github.io%2fpost%2f2018%2f12%2f23%2fxv6-bootloader-written-by-rust%2f&amp;title=xv6%e3%81%ae%e3%83%96%e3%83%bc%e3%83%88%e3%83%ad%e3%83%bc%e3%83%80%e3%83%bc%e3%82%92rust%e3%81%a7%e6%9b%b8%e3%81%8d%e7%9b%b4%e3%81%99" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fyouta1119.github.io%2fpost%2f2018%2f12%2f23%2fxv6-bootloader-written-by-rust%2f&amp;title=xv6%e3%81%ae%e3%83%96%e3%83%bc%e3%83%88%e3%83%ad%e3%83%bc%e3%83%80%e3%83%bc%e3%82%92rust%e3%81%a7%e6%9b%b8%e3%81%8d%e7%9b%b4%e3%81%99" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fyouta1119.github.io%2fpost%2f2018%2f12%2f23%2fxv6-bootloader-written-by-rust%2f&amp;description=xv6%e3%81%ae%e3%83%96%e3%83%bc%e3%83%88%e3%83%ad%e3%83%bc%e3%83%80%e3%83%bc%e3%82%92rust%e3%81%a7%e6%9b%b8%e3%81%8d%e7%9b%b4%e3%81%99" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  
              </div>
            </section>
        

        
          
          
        
      </article>

      
        <ul class="pager blog-pager">
          
          
            <li class="next">
              <a href="https://youta1119.github.io/post/2018/12/24/about-kotlin-native-stdlib/" data-toggle="tooltip" data-placement="top" title="Kotlin/Nativeã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å®Ÿè£…ã‚’è¿½ã„ã‹ã‘ã‚‹">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
          
          <div class="disqus-comments">                  
            <button id="show-comments" class="btn btn-default" type="button">Show <span class="disqus-comment-count" data-disqus-url="https://youta1119.github.io/post/2018/12/23/xv6-bootloader-written-by-rust">comments</span></button>
            <div id="disqus_thread"></div>

            <script type="text/javascript">
              var disqus_config = function () {
              this.page.url = 'https:\/\/youta1119.github.io\/post\/2018\/12\/23\/xv6-bootloader-written-by-rust';
            };

          </script>
          </div>
          
        
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:dev.youta1119@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/youta1119" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/youta1119" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            
            <a href="https://youta1119.github.io/index.xml" title="RSS">
            
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              yota ogino
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2018
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://youta1119.github.io">youta1119&#39;s blog</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.52</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://youta1119.github.io/js/main.js"></script>
<script src="https://youta1119.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script>
<script src="https://youta1119.github.io/js/load-photoswipe.js"></script>







<script type="text/javascript">
$(function(){
  $('#show-comments').on('click', function(){
    var disqus_shortname = 'youta1119-github';
      
    (function() {
      var disqus = document.createElement('script'); 
      disqus.type = 'text/javascript'; 
      disqus.async = true;
      disqus.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(disqus);
    })();
      
    $(this).hide(); 
    });
  });
      
</script>
<script id="dsq-count-scr" src="//youta1119-github.disqus.com/count.js" async></script>




  </body>
</html>

